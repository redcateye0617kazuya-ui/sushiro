<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>壽司郎計算機</title>
    <style>
        :root {
            --sr-orange: #ED5136; 
            --sr-bg: #EAEAEA;    
            --sr-card: #FFFFFF;  
            --sr-text: #4A4A4A;  
        }

        body, html { 
            margin: 0; padding: 0; height: 100%; width: 100%;
            font-family: -apple-system, "PingFang HK", sans-serif;
            background-color: var(--sr-bg); color: var(--sr-text); overflow: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        #slider {
            display: flex; width: 100vw; height: 100vh;
            overflow-x: auto; scroll-snap-type: x mandatory;
            scroll-behavior: smooth;
        }
        #slider::-webkit-scrollbar { display: none; }

        .page {
            flex: 0 0 100vw; width: 100vw; height: 100vh;
            scroll-snap-align: start; box-sizing: border-box;
            display: flex; flex-direction: column; position: relative;
        }

        .tabs-nav {
            position: fixed; top: 0; left: 0; width: 100%; height: 60px;
            display: flex; align-items: center; justify-content: center; z-index: 2000;
        }
        .segment-control {
            background: rgba(200, 200, 200, 0.4); border-radius: 25px; 
            display: flex; padding: 4px; width: 80%;
        }
        .tab-item { 
            flex: 1; padding: 8px 0; text-align: center; border-radius: 22px;
            font-weight: bold; font-size: 0.85rem; cursor: pointer; color: #777;
        }
        .tab-item.active { background: var(--sr-card); color: var(--sr-orange); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }

        .content-scroll { 
            padding: 70px 15px 180px; 
            overflow-y: auto; flex: 1;
        }

        .top-ctrl-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .mini-timer-inline { font-weight: bold; font-size: 0.9rem; color: var(--sr-orange); background: var(--sr-card); padding: 6px 12px; border-radius: 10px; }
        .reset-btn { background: var(--sr-orange); color: #fff; border: none; padding: 6px 16px; border-radius: 12px; font-weight: bold; font-size: 0.8rem; }

        /* 兩行展示佈局 (固定不滾動) */
        .sushi-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 第一行三個 */
            gap: 10px;
            margin-bottom: 10px;
        }
        .sushi-grid.second-row {
            grid-template-columns: repeat(2, 1fr); /* 第二行兩個 */
            padding: 0 15%; /* 讓底行居中 */
        }

        .sushi-card { 
            background: transparent; 
            display: flex; flex-direction: column; align-items: center; 
            padding: 5px 0;
        }
        
        .sushi-icon { 
            width: 65px; height: 65px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            margin-bottom: 5px; position: relative; cursor: pointer;
            background: #fff; box-shadow: 0 3px 8px rgba(0,0,0,0.08);
        }
        .sushi-icon::before { content: ''; position: absolute; width: 100%; height: 100%; border-radius: 50%; border: 5px solid #333; box-sizing: border-box; }
        .sushi-icon::after { content: ''; width: 80%; height: 80%; background: #fff; border-radius: 50%; }
        .core { position: absolute; width: 40%; height: 40%; border-radius: 50%; z-index: 2; }
        .red-core { background: var(--sr-orange); }
        .silver-core { background: #B2BEC3; }
        .gold-core { background: #F1C40F; }
        .black-core { background: #2D3436; }
        .white-core { background: #FFFFFF; border: 1px solid #DDD; }

        .card-label { font-size: 0.75rem; color: #777; font-weight: bold; }
        .card-price { font-weight: bold; font-size: 0.9rem; margin-bottom: 5px; color: var(--sr-text); }
        .card-ctrl { display: flex; align-items: center; gap: 8px; }
        .btn-minus { width: 26px; height: 26px; border-radius: 50%; background: var(--sr-card); display: flex; align-items: center; justify-content: center; font-size: 1.1rem; color: var(--sr-orange); border: 1.2px solid #DDD; font-weight: bold; }
        .val { font-size: 1.2rem; font-weight: bold; color: var(--sr-text); min-width: 20px; text-align: center; }

        .section-title { font-weight: bold; font-size: 0.85rem; margin: 15px 0 8px; color: #888; letter-spacing: 1px; }
        .others-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; }
        .other-btn { background: var(--sr-card); border: 1px solid #ddd; color: var(--sr-text); border-radius: 8px; padding: 8px 0; font-weight: bold; font-size: 0.7rem; }
        
        .list-container { background: var(--sr-card); border-radius: 15px; padding: 12px; margin-top: 5px; }
        .list-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f5f5f5; font-weight: bold; font-size: 0.8rem; }

        .footer-fixed {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: var(--sr-orange); padding: 12px 25px 35px;
            border-radius: 25px 25px 0 0;
            display: flex; justify-content: space-between; align-items: center; z-index: 2000; color: #fff;
        }
        .grand-total-label { font-size: 0.75rem; font-weight: bold; opacity: 0.9; }
        .grand-total { font-size: 2.2rem; font-weight: bold; line-height: 1; margin-top: 2px; } 
        .items-pill { background: #fff; color: var(--sr-orange); padding: 8px 18px; border-radius: 18px; text-align: center; font-weight: bold; }

        .page-timer { align-items: center; justify-content: center; background: #fff; }
        .timer-val { font-size: 5.5rem; font-weight: bold; color: var(--sr-orange); margin-bottom: 20px; }
        .timer-btn-large { background: var(--sr-orange); border: none; padding: 15px 60px; border-radius: 30px; font-weight: bold; font-size: 1.1rem; color: #fff; }
    </style>
</head>
<body>

    <div class="tabs-nav">
        <div class="segment-control">
            <div class="tab-item active" id="tab0" onclick="jumpTo(0)">用餐計時</div>
            <div class="tab-item" id="tab1" onclick="jumpTo(1)">計數清單</div>
        </div>
    </div>

    <div id="slider">
        <div class="page page-timer">
            <div style="font-weight:bold; color:#CCC; font-size: 0.9rem; letter-spacing: 2px;">REMAINING</div>
            <div class="timer-val" id="timer-text">60:00</div>
            <button class="timer-btn-large" id="timer-btn" onclick="toggleT()">開始計時</button>
        </div>

        <div class="page">
            <div class="content-scroll">
                <div class="top-ctrl-bar">
                    <div class="mini-timer-inline" id="mini-timer">60:00</div>
                    <button class="reset-btn" onclick="resetAll()">重設數據</button>
                </div>

                <div class="section-title">壽司碟計數</div>
                <div class="sushi-grid">
                    <div class="sushi-card">
                        <div class="card-label">白碟</div>
                        <div class="sushi-icon" onclick="addP('white', 1)"><div class="core white-core"></div></div>
                        <div class="card-price">$10</div>
                        <div class="card-ctrl"><button class="btn-minus" onclick="addP('white', -1)">−</button><span class="val" id="white-c">0</span></div>
                    </div>
                    <div class="sushi-card">
                        <div class="card-label">紅碟</div>
                        <div class="sushi-icon" onclick="addP('red', 1)"><div class="core red-core"></div></div>
                        <div class="card-price">$12</div>
                        <div class="card-ctrl"><button class="btn-minus" onclick="addP('red', -1)">−</button><span class="val" id="red-c">0</span></div>
                    </div>
                    <div class="sushi-card">
                        <div class="card-label">銀碟</div>
                        <div class="sushi-icon" onclick="addP('silver', 1)"><div class="core silver-core"></div></div>
                        <div class="card-price">$17</div>
                        <div class="card-ctrl"><button class="btn-minus" onclick="addP('silver', -1)">−</button><span class="val" id="silver-c">0</span></div>
                    </div>
                </div>
                <div class="sushi-grid second-row">
                    <div class="sushi-card">
                        <div class="card-label">金碟</div>
                        <div class="sushi-icon" onclick="addP('gold', 1)"><div class="core gold-core"></div></div>
                        <div class="card-price">$22</div>
                        <div class="card-ctrl"><button class="btn-minus" onclick="addP('gold', -1)">−</button><span class="val" id="gold-c">0</span></div>
                    </div>
                    <div class="sushi-card">
                        <div class="card-label">黑碟</div>
                        <div class="sushi-icon" onclick="addP('black', 1)"><div class="core black-core"></div></div>
                        <div class="card-price">$27</div>
                        <div class="card-ctrl"><button class="btn-minus" onclick="addP('black', -1)">−</button><span class="val" id="black-c">0</span></div>
                    </div>
                </div>

                <div class="section-title">副食及其他項目</div>
                <div class="others-grid" id="others-btns"></div>

                <div class="section-title">已選明細</div>
                <div class="list-container" id="item-list">
                    <div style="color:#ccc; text-align:center; padding:5px; font-size: 0.8rem;">未有項目</div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer-fixed">
        <div>
            <div class="grand-total-label">總金額 (含加一)</div>
            <div class="grand-total">$<span id="total">0</span></div>
        </div>
        <div class="items-pill">
            <span id="qty" style="font-size:1.4rem; display:block; line-height:1;">0</span>
            <span style="font-size:0.6rem;">ITEMS</span>
        </div>
    </div>

    <script>
        const slider = document.getElementById('slider');
        function jumpTo(i) { slider.scrollTo({ left: i * window.innerWidth, behavior: 'smooth' }); }
        slider.addEventListener('scroll', () => {
            const idx = Math.round(slider.scrollLeft / window.innerWidth);
            document.getElementById('tab0').classList.toggle('active', idx === 0);
            document.getElementById('tab1').classList.toggle('active', idx === 1);
        });

        let plates = { white:{p:10, c:0}, red:{p:12, c:0}, silver:{p:17, c:0}, gold:{p:22, c:0}, black:{p:27, c:0} };
        let others = [];
        const prices = [13, 15, 18, 19, 22, 27, 32, 33, 37, 39];
        const btnBox = document.getElementById('others-btns');
        prices.forEach(p => {
            let b = document.createElement('button'); b.className = 'other-btn'; b.innerText = `$${p}`;
            b.onclick = () => { others.push(p); update(); };
            btnBox.appendChild(b);
        });

        function addP(id, n) { plates[id].c = Math.max(0, plates[id].c + n); update(); }
        function removeO(i) { others.splice(i, 1); update(); }

        function update() {
            let s = 0, q = 0;
            for (let k in plates) { document.getElementById(k+'-c').innerText = plates[k].c; s += plates[k].c * plates[k].p; q += plates[k].c; }
            const list = document.getElementById('item-list');
            list.innerHTML = others.length === 0 ? '<div style="color:#ccc; text-align:center; padding:5px; font-size:0.8rem;">未有項目</div>' : '';
            others.forEach((p, i) => { s += p; q++; let d = document.createElement('div'); d.className = 'list-item'; d.innerHTML = `<span>項目 ($${p})</span> <span style="color:var(--sr-orange);" onclick="removeO(${i})">✕</span>`; list.appendChild(d); });
            let total = s * 1.1;
            document.getElementById('total').innerText = total.toFixed(1).replace('.0',''); 
            document.getElementById('qty').innerText = q;
        }

        let time = 3600, tId = null;
        function toggleT() {
            const b = document.getElementById('timer-btn');
            if (tId) { clearInterval(tId); tId = null; b.innerText = "繼續計時"; }
            else { b.innerText = "暫停計時"; tId = setInterval(() => {
                if (time <= 0) { clearInterval(tId); alert("用餐時間到！"); return; }
                time--; let m = Math.floor(time / 60), s = time % 60;
                let str = `${m}:${s < 10 ? '0'+s : s}`;
                document.getElementById('timer-text').innerText = str;
                document.getElementById('mini-timer').innerText = str;
            }, 1000); }
        }
        function resetAll() { if(confirm("確定重設數據？")) { location.reload(); } }
        update();
    </script>
</body>
</html>
